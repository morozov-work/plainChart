var plainChart;(()=>{"use strict";var t={d:(n,e)=>{for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{init:()=>o});const e=(t=1)=>{let n=0,e=[];for(;n<3;)e.push(""+(255-t*+Math.random().toString().slice(2,4))),n++;return e.toString()};let i;function a(t,n,e){function i(){t.classList.remove(e),t.classList.add(n)}t.addEventListener("mousedown",(()=>{t.classList.add(e),t.classList.remove(n),t.addEventListener("mouseout",i)})),t.addEventListener("mouseup",(()=>{i(),t.removeEventListener("mouseout",i)}))}class s{constructor(t,n,s={}){this.values=t,this.labels=n,this.colors=s.colors.innerHTML.split(";"),this.wrapper=document.querySelector(".chartWrapper");const{currentRadius:r=100,currentDonut:l=50}=s,{radiusInput:o,donutInput:h,legendCheckbox:u,editBtn:p}=function(t,n){document.querySelector(".chartSettings").innerHTML=`\n                            <div class="plainChart-options-wrapper">\n                                <div class="plainChart-options">\n                                    radius\n                                    <input type="range" \n                                        class="plainChart-options plainChart-radius" \n                                        min="55" \n                                        value="${t}"\n                                        max="250" \n                                        step="any">\n                                </div>\n                                <div class="plainChart-options">\n                                    donut\n                                    <input type="range" \n                                        class="plainChart-options plainChart-donut"     \n                                        min="0" \n                                        value="${n}"\n                                        max="95" \n                                        step="any">\n                                </div>\n                                <div class="plainChart-options">\n                                    legend\n                                    <input type="checkbox" \n                                        class="plainChart-options plainChart-legend" checked>\n                                </div>\n                                <button class="plainChart-EditBtn plainChart-button-color"><p>Edit</p></button>\n                            </div>\n                            `;const e=document.querySelector(".plainChart-radius"),i=document.querySelector(".plainChart-donut"),s=document.querySelector(".plainChart-legend"),r=document.querySelector(".plainChart-EditBtn");return a(r,".plainChart-button-color","chartButton-clicked"),{radiusInput:e,donutInput:i,legendCheckbox:s,editBtn:r}}(r,l);this.radiusInput=o,this.donutInput=h,this.legendCheckbox=u;const c=()=>{this.height=2.5*this.radiusInput.value,this.width=2.5*this.radiusInput.value,this.center={x:this.width/2,y:this.height/2},this.radius=this.radiusInput.value,this.donut=this.donutInput.value;const t=document.createElement("canvas");t.classList.add("chart"),t.height=this.height,t.width=this.width,this.wrapper.append(t);const n=t.getContext("2d");t.addEventListener("mousedown",(t=>{const n=[];n.push(t.clientY),n.push(t.clientY);const e=t=>{n.push(t.clientY),n.shift(),n[1]>n[0]?this.radiusInput.value++:this.radiusInput.value--,d()};window.addEventListener("mousemove",e),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",e)}))}));const a=(()=>{const t=this.values.reduce(((t,n)=>t+n)),n=this.values.map((n=>n/t));return n.map(((t,e,i)=>{const a={};if(e){const t=n.filter(((t,n)=>n<e)).reduce(((t,n)=>t+n));a.startAngle=2*Math.PI*t}else a.startAngle=0;return a.endAngle=2*Math.PI*t+a.startAngle,a}))})(),s=(t,e,i)=>{n.beginPath(),n.moveTo(this.center.x,this.center.y),n.lineTo(this.center.x-this.radius*Math.cos(t),this.center.y-this.radius*Math.sin(t)),n.arc(this.center.x,this.center.y,this.radius,t,e),n.fillStyle=`rgb(${i})`,n.fill()},r=(t,e,i)=>{n.beginPath(),n.moveTo(this.center.x,this.center.y),n.lineTo(this.center.x-1.1*this.radius*Math.cos(t),this.center.y-1.1*this.radius*Math.sin(t)),n.arc(this.center.x,this.center.y,1.1*this.radius,t,e),n.fillStyle=`rgb(${i})`,n.fill()};a.forEach(((t,n)=>{let a;this.colors.length>=this.values.length?a=this.colors[n]:(a=e(),this.colors.push(a)),n===+i?r(t.startAngle,t.endAngle,a):s(t.startAngle,t.endAngle,a)}));const l=this.radius*this.donut/100;n.globalCompositeOperation="xor",n.fillStyle="white",n.beginPath(),n.arc(this.center.x,this.center.y,l,0,2*Math.PI),n.fill()},d=()=>{this.wrapper.innerHTML="",c(),((t,n,e,a,s)=>{const r=document.createElement("div");r.classList.add("legend"),s.checked||r.classList.add("hide"),t.append(r),n.forEach(((t,s)=>{const l=document.createElement("div");l.style.cssText="\n                            display: flex; \n                            justify-content: between; \n                            align-items: center; \n                            margin: 0 10px;\n                            padding: 0;\n                            cursor: pointer;\n                            ";const o=document.createElement("div"),h=document.createElement("div");r.append(l),o.style.cssText=`\n                                    width: 12px; \n                                    height: 12px; \n                                    margin: 5px;\n                                    background-color: rgb(${e[s]})\n                                    `,l.append(o),h.textContent=n[s],h.style.cssText="\n                                    font-style: normal; \n                                    font-size: 14px; \n                                    color: black; \n                                    font-family: sans-serif; \n                                    user-select: none\n                                    ",l.append(h),l.addEventListener("click",(()=>{i=s,a()}))}))})(this.wrapper,n,this.colors,d,this.legendCheckbox)};return this.radiusInput.addEventListener("input",d),this.donutInput.addEventListener("input",d),this.legendCheckbox.addEventListener("click",(()=>document.querySelector(".legend").classList.toggle("hide"))),d(),{radiusInput:o,donutInput:h,legendCheckbox:u,editBtn:p}}}class r{constructor(t,n,i={}){this.values=t,this.labels=n,this.colors=i.colors,this.wrapper=document.querySelector(".chartWrapper");const s=this.colors,r=()=>{this.colors.innerHTML="";for(let t=0;t<this.values.length;t++){const t=e(this.bright);this.colors.innerHTML+=`${t};`}},{CurrentWidth:l=500,CurrentHeight:o=300,CurrentBright:h=1.5,CurrentColumnWidth:u=20,CurrentGap:p=0,CurrentFontSize:c=14,CurrentScale:d=1}=i,{widthInput:g,heightInput:v,brightInput:b,columnWidthInput:m,gapInput:C,fontSizeInput:x,scaleInput:f,editBtn:y}=function(t,n,e,i,s,r,l){document.querySelector(".chartSettings").innerHTML=`\n                            <div class="plainChart-options-wrapper">\n                                <div> \n                                    width\n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-width" \n                                        min="200" \n                                        value="${t}"\n                                        max="900" \n                                        step="any">\n                                </div>\n                                <div> \n                                    height \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-height" \n                                        min="200" \n                                        value="${n}"\n                                        max="900" \n                                        step="any">\n                                </div>\n                                <div> \n                                    bright \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-bright" \n                                        min="0" \n                                        value="${e}"\n                                        max="5" \n                                        step="any">\n                                </div>\n                                <div> \n                                    columnWidth \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-columnWidth" \n                                        min="10" \n                                        value="${i}"\n                                        max="40" \n                                        step="any">\n                                </div>\n                                <div> \n                                    gap \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-gap" \n                                        min="0" \n                                        value="${s}"\n                                        max="50" \n                                        step="any">\n                                </div>\n                                <div> \n                                    fontSize \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-fontSize" \n                                        min="5" \n                                        value="${r}"\n                                        max="20" \n                                        step="any">\n                                </div>\n                                <div> \n                                    scale \n                                    <input \n                                        type="range" \n                                        class="plainChart-options plainChart-scale" \n                                        min="0.1" \n                                        value="${l}"\n                                        max="2" \n                                        step="any">\n                                </div>\n                                <button class="plainChart-EditBtn plainChart-button-color"><p>Edit</p></button>\n                            </div>\n                            `;const o=document.querySelector(".plainChart-width"),h=document.querySelector(".plainChart-height"),u=document.querySelector(".plainChart-bright"),p=document.querySelector(".plainChart-columnWidth"),c=document.querySelector(".plainChart-gap"),d=document.querySelector(".plainChart-fontSize"),g=document.querySelector(".plainChart-scale"),v=document.querySelector(".plainChart-EditBtn");return a(v,".plainChart-button-color","chartButton-clicked"),{widthInput:o,heightInput:h,brightInput:u,columnWidthInput:p,gapInput:c,fontSizeInput:d,scaleInput:g,editBtn:v}}(l,o,h,u,p,c,d),w=()=>{this.width=+g.value,this.height=+v.value,this.bright=+b.value,this.columnWidth=+m.value,this.gap=+C.value,this.fontSize=+x.value,this.fontColor=NaN,this.labelHeight=2*this.fontSize,this.valueWidth=80,this.scale=+f.value,this.numberOfSerifs=10,this.ratio=this.height/Math.max(...this.values),this.canvas=(()=>{const t=document.createElement("canvas");return t.classList.add("chart"),t.width=this.width,t.height=this.height,t.textContent="trial canvas",this.wrapper.append(t),t})();const t=this.canvas.getContext("2d");this.values.forEach(((n,e,i)=>{const a=n*this.ratio*this.scale;let s=this.gap+e*(this.columnWidth+this.gap);const r=this.height-this.labelHeight-a;n.indexOf||(s=this.valueWidth+e*(this.columnWidth+this.gap)),t.fillStyle=`rgb(${this.colors.innerHTML.split(";")[e]})`,t.fillRect(s,r,this.columnWidth,a),"inherit"!==this.fontColor&&(t.fillStyle=this.fontColor),t.font=`${this.fontSize}px serif`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.labels[e],s+this.columnWidth/2,this.height-this.labelHeight/2,this.columnWidth)})),t.beginPath(),t.strokeStyle="black",t.moveTo(this.width,this.height-this.labelHeight),t.lineTo(this.valueWidth,this.height-this.labelHeight),t.lineTo(this.valueWidth,0),t.stroke();for(let n=0;n<this.numberOfSerifs;n++){const e=this.height-this.labelHeight,i=this.ratio*this.scale,a=n*(e/this.numberOfSerifs),s=(a/i).toFixed(1),r=e-a;t.beginPath(),t.strokeStyle="black",t.moveTo(this.valueWidth,r),t.lineTo(this.valueWidth-10,r),t.stroke(),t.textAlign="center",t.fillText(s,30,r)}},L=()=>{this.wrapper.innerHTML="",w()};return g.addEventListener("input",L),v.addEventListener("input",L),b.addEventListener("input",(()=>{r(),L()})),m.addEventListener("input",L),C.addEventListener("input",L),x.addEventListener("input",L),f.addEventListener("input",L),L(),{widthInput:g,heightInput:v,brightInput:b,columnWidthInput:m,gapInput:C,fontSizeInput:x,scaleInput:f,colors:s,editBtn:y}}}function l(t){function n(t,n){const e=document.createElement("div");return e.classList.add(n),t.append(e),e}const e=n(t,"plainChart"),i=(n(e,"chartWrapper"),n(e,"chartSettings")),a=n(e,"chartSettings-icon");a.addEventListener("click",(()=>{i.classList.toggle("hide")})),(t=>{const n=document.createElement("canvas");n.height=35,n.width=35;const e=n.width/2;t.append(n);const i=n.getContext("2d");for(let t=0;t<2*Math.PI;t+=Math.PI/6)i.beginPath(),i.arc(e,e,12,t+Math.PI/4,t+2*Math.PI/6),i.arc(e,e,15,t+2*Math.PI/6+.05,t+Math.PI/4+Math.PI/6-.05,!1),i.lineTo(e-5*Math.cos(t),e-5*Math.sin(t)),i.fillStyle="grey",i.fill();i.beginPath(),i.fillStyle="white",i.arc(e,e,7,0,2*Math.PI),i.fill()})(a)}function o(t,n){return new h(t,n)}class h{constructor(t,n="no data"){if(this.parent=t,function(){const t=document.querySelector("head"),n=document.createElement("style");n.innerHTML="\n\n        .plainChart {\n            position: relative;\n            display: inline-block;\n        }\n\n        .plainChart-options {\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .chartSettings {\n            border: 1px solid black;\n            position: fixed;\n            top: 20px;\n            left: 350px;\n        }\n\n        .chartSettings-icon {\n            cursor: pointer;\n            position: absolute;\n            top: 0;\n            left: 0;\n        }\n\n        .legend {\n            display: flex; \n            justify-content: flex-start; \n            flex-wrap: wrap;\n        }\n\n        .inputFields {\n            box-shadow: 0px 0px 8px 0px rgba(34, 60, 80, 0.2);\n            box-sizing: border-box;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            flex-wrap: wrap;\n            align-items: stretch;\n            padding: 10px;\n            min-width: 400px;\n        }\n\n        .plainChart-input {\n            margin-bottom: 10px;\n            border: none;\n            border-radius: 5px;\n            resize: none;\n            outline: none;\n            font-size: 16px;\n            font-style: normal;\n            font-family: Courier;\n            box-shadow: 0px 0px 4px 0px rgba(34, 60, 80, 0.2);\n            padding: 5px;\n        }\n\n        .plainChart-input-name {\n            font-weight: bold;\n        }\n\n        .plainChart-input-values, \n        .plainChart-input-labels { \n            font-weight: normal;\n        }\n\n        .plainChart-input-buttons {\n            display: flex;\n            justify-content: space-between;\n            \n            \n        }\n\n        .plainChart-createButton {\n            box-shadow: 0px 0px 4px 0px rgba(34, 60, 80, 0.2);\n            border: none;\n            outline: none;\n            display: block;\n            flex-grow: 1;\n            border-radius: 5px;\n            padding: 2em 0;\n            transition: .5s;\n            font-size: 16px;\n            font-style: normal;\n            font-family: Courier;\n            font-weight: bold;\n        }\n\n        .plainChart-button-color {\n            background-color: rgba(255, 255, 255, 0.2);\n            transition: .2s;\n        }\n\n        .plainChart-button-color:hover, \n        .plainChart-EditBtn:hover {\n            background-color: rgba(34, 60, 80, 0.2);\n            transition: .1s;\n        }\n\n\n\n        .barChart-button {\n            margin-right: 10px;\n        }\n\n        .plainChart-EditBtn {\n            font-size: 16px;\n            font-style: normal;\n            font-family: Courier;\n            outline: none;\n            border: none;\n            user-select: none;\n            cursor: pointer;\n            box-shadow: 0px 0px 4px 0px rgba(34, 60, 80, 0.2);\n            margin: 10px;\n            padding: 0;\n        }\n\n        .plainChart-EditBtn p {\n            margin: 10px;\n        }\n\n        .chartButton-clicked {\n            background-color: rgba(34, 60, 80, 0.2);\n            box-shadow: 0px 0px 4px 0px rgba(34, 60, 80, 0.2) inset;\n            transition: none;\n            font-size: 15.9px;\n            padding-left: .4px;\n            padding-right: .4px;\n        }\n\n        .hide {\n            display: none;\n        }\n    ",t.append(n)}(),"no data"===n)return void console.log("create new chart no data");const{type:i="",values:o="",labels:h="",settings:u={}}=n;if(!i||!o||!h||o.split(",").length!==h.split(",").length)return void console.log("create new chart no val");this.type=i,this.values=o,this.labels=h,this.settings=u;const p=document.createElement("div");u.colors?(p.innerHTML=u.colors,this.settings.colors=p):((()=>{p.innerHTML="";for(let t=0;t<this.values.length;t++){const t=e(this.bright);p.innerHTML+=`${t};`}})(),this.settings.colors=p);const c=()=>{this.parent.innerHTML="";const{barChartBtn:t,pieChartBtn:n,valuesInput:e,labelsInput:i}=function(t,n,e){const i=document.createElement("div");i.classList.add("inputFields"),t.append(i),i.innerHTML='\n        <input \n            type="text" \n            class="plainChart-input-name plainChart-input" \n            placeholder="Enter a name for the chart">\n        <textarea \n            class="plainChart-input-values plainChart-input" \n            placeholder="Enter chart values separated by \',\'" \n            rows="6"></textarea>\n        <textarea \n            class="plainChart-input-labels plainChart-input"  \n            placeholder="Enter chart labels separated by \',\'" \n            rows="6"></textarea>\n        <div class="plainChart-input-buttons">\n            <button class="plainChart-createButton barChart-button plainChart-button-color ">\n                New Bar Chart\n            </button>\n            <button class="plainChart-createButton pieChart-button plainChart-button-color ">\n                New Pie Chart\n            </button>\n        </div>  \n        ';const s=document.querySelector(".pieChart-button"),r=document.querySelector(".barChart-button"),l=document.querySelector(".plainChart-input-values"),o=document.querySelector(".plainChart-input-labels");return document.querySelector(".plainChart-input-name"),l.value=n,o.value=e,a(r,"plainChart-button-color","chartButton-clicked"),a(s,"plainChart-button-color","chartButton-clicked"),{barChartBtn:r,pieChartBtn:s,valuesInput:l,labelsInput:o}}(this.parent,this.values,this.labels);n.addEventListener("click",(()=>{this.values=e.value,this.labels=i.value,d()})),t.addEventListener("click",(()=>{this.values=e.value,this.labels=i.value,g()}))},d=()=>{this.parent.innerHTML="",l(this.parent);const{radiusInput:t,donutInput:n,legendCheckbox:e,editBtn:i}=new s(this.values,this.labels,this.settings),a=()=>{this.settings.currentRadius=t.value,this.settings.currentDonut=n.value};i.addEventListener("click",(()=>{a(),c()})),t.addEventListener("input",a),n.addEventListener("input",a)},g=()=>{this.parent.innerHTML="",l(this.parent);const{widthInput:t,heightInput:n,brightInput:e,columnWidthInput:i,gapInput:a,fontSizeInput:s,scaleInput:o,colors:h,editBtn:u}=new r(this.values,this.labels,this.settings),p=()=>{this.settings.CurrentWidth=t.value,this.settings.CurrentHeight=n.value,this.settings.CurrentBright=e.value,this.settings.CurrentColumnWidth=i.value,this.settings.CurrentGap=a.value,this.settings.CurrentFontSize=s.value,this.settings.CurrentScale=o.value,this.settings.colors=h};u.addEventListener("click",(()=>{p(),c()})),t.addEventListener("input",p),n.addEventListener("input",p),e.addEventListener("input",p),i.addEventListener("input",p),a.addEventListener("input",p),s.addEventListener("input",p),o.addEventListener("input",p),p()};switch(this.type){case"barChart":g();break;case"pieChart":d();break;default:c()}}get values(){return this._values}set values(t){this._values=t.split(",").map((t=>+t))}get labels(){return this._labels}set labels(t){this._labels=t.split(",")}updateObjectForReturn(){const t={type:this.type,values:this.values,labels:this.labels,settings:this.settings};return t.settings.colors=this.settings.colors.innerHTML,t}}plainChart=n})();